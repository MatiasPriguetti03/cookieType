(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const S=["a","again","all","also","and","another","any","around","as","ask","at","back","because","become","before","begin","both","but","by","call","can","change","child","come","could","course","day","develop","each","early","end","even","eye","face","fact","few","first","follow","from","general","get","give","good","govern","group","hand","have","he","head","help","here","high","hold","home","how","however","if","increase","interest","it","know","large","last","lead","leave","life","like","line","little","look","make","man","may","mean","might","more","must","need","never","new","no","now","number","of","off","old","on","one","open","or","order","out","over","own","part","people","person","place","plan","play","point","possible","present","problem","program","public","real","right","run","say","see","seem","show","small","some","stand","state","still","such","system","take","than","that","the","then","there","these","they","thing","think","this","those","time","to","under","up","use","very","way","what","when","where","while","will","with","without","work","world","would","write","you","she","set","we","long","in","many","do","after","which","so","same","other","house","during","much","just","consider","since","should","only","tell","about"],C=["de","para","este","esta","hacer","con","mejor","tiempo","aquí","donde","ya","sin","dentro","fuera","todo","ninguno","algo","vez","quién","quiénes","quienes","al","uno","cada","pues","hacia","sobre","aunque","cualquier","tanto","cuanto","tan","mientras","por","fue","también","dos","tres","cuatro","cinco","tú","quien","nos","ella","ellos","ellas","siempre","luego","donde","como","cuando","están","todas","todos","ya","bien","solamente","ahora","otros","unas","unos","cerca","aún","ver","tener","quiero","quiere","saber","entiendo","entiende","parece","tal","vez","primero","segundo","tercero","listo","juntos","otros","quedarse","otros","volver","fácil","difícil","mejorar","necesario","cuál","cuáles","largo","corto","pregunta","respuesta","mi","tu","su","nuestro","vuestro","varios","así","como","porque"],f=document.querySelector("time"),i=document.querySelector("p"),c=document.querySelector("input");document.querySelector("#game");const y=document.querySelector("#results"),I=y.querySelector("#results-wpm"),A=y.querySelector("#results-accuracy"),T=document.querySelector("#restart-btn"),v=document.getElementById("progressbar");document.getElementById("time-30");document.getElementById("time-60");document.getElementById("time-90");const b=document.getElementById("timeSwitcher");let h=b.querySelector(".active");var m=h.value;let q=[];var l=m;let g=S,u;M();var w=document.getElementById("select-language");function $(){x();let t=w.options[w.selectedIndex].text;t.toLowerCase()=="english"?g=S:t.toLowerCase()=="spanish"&&(g=C),L()}w.onchange=$;$();function L(){y.style.display="none",c.removeAttribute("disabled"),u&&clearInterval(u),q=g.toSorted(()=>Math.random()-.5).slice(0,50),l=m,f.textContent=l,i.innerHTML=q.map((r,s)=>`
    <x-word>
        ${r.split("").map(e=>`<x-letter>${e}</x-letter>`).join("")}
    </x-word>
    `).join("");const t=i.querySelector("x-word");t.classList.add("active"),t.querySelector("x-letter").classList.add("active"),u&&clearInterval(u),v.style.width="100%",u=setInterval(()=>{l--,f.textContent=l;let r=(l/m*100).toFixed(2);v.style.width=`${r}%`,l===0&&(clearInterval(u),v.style.width="0%",x())},1e3)}function B(){const t=i.querySelector("x-word.active"),r=t.querySelector("x-letter.active"),s=t.innerText.trim();c.maxLength=s.length;const n=t.querySelectorAll("x-letter");n.forEach(a=>a.classList.remove("correct","incorrect")),c.value.split("").forEach((a,d)=>{const p=n[d],E=s[d],k=a.toLowerCase()===E.toLowerCase()?"correct":"incorrect";p.classList.add(k)}),r.classList.remove("active","is-last");const e=c.value.length,o=n[e];o?o.classList.add("active"):r.classList.add("active","is-last"),t.nextElementSibling===null&&r.classList.contains("is-last")&&x()}function W(){const t=new Audio("./sounds/fortune.mp3");t.volume=.1,t.play().catch(r=>console.error("Error al reproducir:",r))}function j(t){const r=i.querySelector("x-word.active"),s=r.querySelector("x-letter.active"),{key:n}=t;if(n===" "){t.preventDefault();const e=r.nextElementSibling,o=e.querySelector("x-letter");r.classList.remove("active","marked"),s.classList.remove("active"),e.classList.add("active"),o.classList.add("active"),c.value="";const d=r.querySelectorAll("x-letter:not(.correct)").length>0?"marked":"correct";r.classList.add(d),r.classList.contains("marked")||W();return}if(n==="Backspace"){const e=r.previousElementSibling,o=s.previousElementSibling;if(!e&&!o){t.preventDefault();return}if(i.querySelector("x-word.marked")&&!o){t.preventDefault(),e.classList.remove("marked"),e.classList.add("active");const d=e.querySelector("x-letter:last-child");s.classList.remove("active"),d.classList.add("active"),c.value=[...e.querySelectorAll("x-letter.correct, x-letter.incorrect")].map(p=>p.classList.contains("correct")?p.innerText:"*").join("")}}}function M(){document.addEventListener("keydown",()=>{c.focus()}),c.addEventListener("keydown",j),c.addEventListener("keyup",B),T.addEventListener("click",L),b.querySelectorAll("button").forEach(t=>{t.addEventListener("click",()=>{h.classList.remove("active"),h=t,h.classList.add("active"),m=h.value,L()})})}function x(){y.style.display="flex",c.setAttribute("disabled",!0),clearInterval(u),f.textContent=l;const t=i.querySelectorAll("x-word.correct").length,r=i.querySelectorAll("x-letter.correct").length,s=i.querySelectorAll("x-letter.incorrect").length,n=r+s,e=n>0?r/n*100:0,o=t*m/(m-l);I.textContent=o.toFixed(2),A.textContent=`${e.toFixed(2)}%`}
